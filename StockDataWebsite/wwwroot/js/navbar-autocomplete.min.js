document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("NavbarCompanySearch"),n=document.getElementById("navbarSuggestions"),t=window.currentCompanyName;e&&(e.addEventListener("input",(function(){const o=this.value.trim();o.length>=2?fetch(`/api/companies/search?query=${encodeURIComponent(o)}`).then((e=>e.json())).then((o=>{n.innerHTML="",o.length>0?o.forEach((o=>{if(t&&o.companyName.toLowerCase()===t.toLowerCase())return;const i=document.createElement("a");i.classList.add("list-group-item","list-group-item-action"),i.setAttribute("role","option"),i.textContent=`${o.companyName} (${o.companySymbol})`,i.addEventListener("click",(function(){e.value=o.companyName,n.innerHTML=""})),n.appendChild(i)})):n.innerHTML='<div class="list-group-item">No results found</div>'})).catch((e=>{console.error("Error fetching suggestions:",e),n.innerHTML='<div class="list-group-item">Error fetching suggestions</div>'})):n.innerHTML=""})),document.addEventListener("click",(function(t){e.contains(t.target)||n.contains(t.target)||(n.innerHTML="")})))}));